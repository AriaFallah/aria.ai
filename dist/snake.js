!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";function n(t){var e=t.cellWidth,i=t.height,n=t.width;return{x:Math.round(Math.random()*(n-e)/e),y:Math.round(Math.random()*(i-e)/e)}}function o(t,e,i){return u(e,i)||d(i,t)}function r(t){if(null==t)throw new Error("Argument was null");return t}function s(t,e,i){var n=t.cellWidth,o=t.snakeColor,r=i.x,s=i.y;e.fillStyle=o,e.strokeStyle=o,e.fillRect(r*n,s*n,n,n),e.strokeRect(r*n,s*n,n,n)}function a(t,e,i,n){var o=window.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,s=o/r;o!==r?(t.width=i*s,t.height=n*s,t.style.width=i+"px",t.style.height=n+"px"):(t.width=i,t.height=n,t.style.width="",t.style.height=""),e.scale(s,s)}function h(t){return Array.from({length:t},function(t,e){return e})}function c(t,e){return!("right"===t&&"left"===e||"left"===t&&"right"===e||"up"===t&&"down"===e||"down"===t&&"up"===e)}function d(t,e){var i=t.x,n=t.y,o=!0,r=!1,s=void 0;try{for(var a,h=e.slice(1)[Symbol.iterator]();!(o=(a=h.next()).done);o=!0){var c=a.value;if(i===c.x&&n===c.y)return!0}}catch(t){r=!0,s=t}finally{try{!o&&h.return&&h.return()}finally{if(r)throw s}}return!1}function u(t,e){var i=e.x,n=e.y,o=t.width,r=t.height,s=t.cellWidth;return i<0||n<0||i>=o/s||n>=r/s}Object.defineProperty(e,"__esModule",{value:!0}),e.createFood=n,e.didLose=o,e.nullThrows=r,e.paintCell=s,e.scaleCanvas=a,e.seq=h,e.validMove=c},function(t,e,i){"use strict";var n=i(2),o=function(t){return t&&t.__esModule?t:{default:t}}(n),r=i(0),s={cellWidth:10,height:.5*document.body.clientHeight,snakeColor:"#0074D9",speed:1/16,width:.5*document.body.clientWidth},a=document.getElementById("canvas"),h=a.getContext("2d");(0,r.scaleCanvas)(a,h,s.width,s.height);var c=new o.default(s,h);document.addEventListener("keydown",c.onKeyDown)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(0),s=function(){function t(){n(this,t),this.body=(0,r.seq)(5).map(function(t){return{x:t,y:0,didPivot:!1,direction:"right"}}).reverse(),this.moves=[]}return o(t,[{key:"queueMove",value:function(t){if(!(this.moves.length>=3)){var e=this.moves.length>0?this.moves[this.moves.length-1]:this.body[0].direction;switch(t){case 37:(0,r.validMove)(e,"left")&&this.moves.push("left");break;case 38:(0,r.validMove)(e,"up")&&this.moves.push("up");break;case 39:(0,r.validMove)(e,"right")&&this.moves.push("right");break;case 40:(0,r.validMove)(e,"down")&&this.moves.push("down");break;default:return}}}}]),t}(),a=function(){function t(e,i){var o=this;n(this,t),this.accumulator=0,this.onKeyDown=function(t){if(o.gameOver)return void o.init();o.snake.queueMove(t.keyCode)},this.config=e,this.ctx=i,this.scoreElement=(0,r.nullThrows)(document.getElementById("score")),this.init()}return o(t,[{key:"init",value:function(){var t=this;this.food=(0,r.createFood)(this.config),this.gameOver=!1,this.setScore(0),this.snake=new s,this.interval=setInterval(function(){t.update(t.config.speed),t.render()},4)}},{key:"render",value:function(){var t=this.config,e=t.height,i=t.width;this.ctx.fillStyle="white",this.ctx.fillRect(0,0,i,e);var n=!0,o=!1,s=void 0;try{for(var a,h=this.snake.body[Symbol.iterator]();!(n=(a=h.next()).done);n=!0){var c=a.value;(0,r.paintCell)(this.config,this.ctx,c)}}catch(t){o=!0,s=t}finally{try{!n&&h.return&&h.return()}finally{if(o)throw s}}(0,r.paintCell)(this.config,this.ctx,this.food)}},{key:"setScore",value:function(t){this.score=t,this.scoreElement.innerHTML=""+this.score}},{key:"update",value:function(t){var e=this.config;e.height,e.width;this.accumulator+=t;for(var i=this.snake.body.length-1;i>=0;--i)"right"===this.snake.body[i].direction?this.snake.body[i].x+=t:"left"===this.snake.body[i].direction?this.snake.body[i].x-=t:"up"===this.snake.body[i].direction?this.snake.body[i].y-=t:"down"===this.snake.body[i].direction&&(this.snake.body[i].y+=t),this.accumulator>=1&&0!==i&&this.snake.body[i-1].didPivot&&(this.snake.body[i].didPivot=!0,this.snake.body[i].direction=this.snake.body[i-1].direction,this.snake.body[i-1].didPivot=!1);if(this.accumulator>=1&&this.snake.moves.length>0&&(this.snake.body[0].direction=this.snake.moves.shift(),this.snake.body[0].didPivot=!0),!(this.accumulator<1)){if(this.accumulator=0,(0,r.didLose)(this.snake.body,this.config,this.snake.body[0]))return this.gameOver=!0,void clearInterval(this.interval);if(this.snake.body[0].x===this.food.x&&this.snake.body[0].y===this.food.y){var n=this.snake.body[this.snake.body.length-1],o=n.direction,s=n.x,a=n.y;"right"===o?s-=1:"left"===o?s+=1:"up"===o?a+=1:"down"===o&&(a-=1),this.setScore(this.score+1),this.food=(0,r.createFood)(this.config),this.snake.body.push({didPivot:!1,direction:o,x:s,y:a})}}}}]),t}();e.default=a}]);