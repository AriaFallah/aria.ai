!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){i(this,e),this.numerator=t,this.denominator=n}return o(e,null,[{key:"add",value:function(t,n){if(t.denominator===n.denominator)return new e(t.numerator+n.numerator,t.denominator);var i=e.lcd(t.denominator,n.denominator);return e.add(new e(t.numerator*(i/t.denominator),i),new e(n.numerator*(i/n.denominator),i))}},{key:"ceil",value:function(t){var n=t.val();return new e(t.val()%1===0?n+1:Math.ceil(n),1)}},{key:"floor",value:function(t){var n=t.val();return new e(t.val()%1===0?n-1:Math.floor(n),1)}},{key:"lcd",value:function(t,n){return t*n/e.gcd(t,n)}},{key:"gcd",value:function(e,t){for(;0!=t;)e>t?e-=t:t-=e;return e}},{key:"sub",value:function(t,n){if(t.denominator===n.denominator)return new e(t.numerator-n.numerator,t.denominator);var i=e.lcd(t.denominator,n.denominator);return e.sub(new e(t.numerator*(i/t.denominator),i),new e(n.numerator*(i/n.denominator),i))}}]),o(e,[{key:"val",value:function(){return this.numerator/this.denominator}}]),e}();t.default=r,r.gcd=function(e){function t(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];var r=JSON.stringify(i);if(n[r])return n[r];var a=e.apply(void 0,i);return n[r]=a,a}var n={};return t}(r.gcd)},function(e,t,n){"use strict";function i(e){var t=e.cellWidth,n=e.height,i=e.width;return{x:Math.round(Math.random()*(i-t)/t),y:Math.round(Math.random()*(n-t)/t)}}function o(e,t,n){return l(t,{x:n.x.val(),y:n.y.val()})||h(n,e)}function r(e){if(null==e)throw new Error("Argument was null");return e}function a(e,t,n){var i=e.cellWidth,o=e.snakeColor,r=n.x,a=n.y;t.fillStyle=o,t.strokeStyle=o,t.fillRect(r*i,a*i,i,i),t.strokeRect(r*i,a*i,i,i)}function s(e,t,n,i){var o=window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,a=o/r;o!==r?(e.width=n*a,e.height=i*a,e.style.width=n+"px",e.style.height=i+"px"):(e.width=n,e.height=i,e.style.width="",e.style.height=""),t.scale(a,a)}function u(e){return Array.from({length:e},function(e,t){return t})}function d(e,t){return!("right"===e&&"left"===t||"left"===e&&"right"===t||"up"===e&&"down"===t||"down"===e&&"up"===t)}function h(e,t){var n=e.x,i=e.y,o=!0,r=!1,a=void 0;try{for(var s,u=t.slice(1)[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value;if(n.val()===d.x.val()&&i.val()===d.y.val())return!0}}catch(e){r=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw a}}return!1}function l(e,t){var n=t.x,i=t.y,o=e.width,r=e.height,a=e.cellWidth;return n<0||i<0||n>=o/a||i>=r/a}Object.defineProperty(t,"__esModule",{value:!0}),t.createFood=i,t.didLose=o,t.nullThrows=r,t.paintCell=a,t.scaleCanvas=s,t.seq=u,t.validMove=d;var c=n(0);!function(e){e&&e.__esModule}(c)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(0),r=i(o),a=n(3),s=i(a),u=n(1),d=document.body,h=d.clientHeight,l=d.clientWidth,c=.75*Math.min(h,l),f={cellWidth:10,height:c,snakeColor:"#0074D9",speed:new r.default(1,10),width:c},v=document.getElementById("canvas"),y=v.getContext("2d");(0,u.scaleCanvas)(v,y,f.width,f.height);var m=new s.default(f,y);document.addEventListener("keydown",m.onKeyDown)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(r),s=n(1),u=new a.default(1,1),d=function(){function e(){i(this,e),this.body=(0,s.seq)(5).map(function(e){return{x:new a.default(e,1),y:new a.default(0,1),didPivot:!1,direction:"right"}}).reverse(),this.moves=[]}return o(e,[{key:"queueMove",value:function(e){if(!(this.moves.length>=3)){var t=this.moves.length>0?this.moves[this.moves.length-1]:this.body[0].direction;switch(e){case 37:(0,s.validMove)(t,"left")&&this.moves.push("left");break;case 38:(0,s.validMove)(t,"up")&&this.moves.push("up");break;case 39:(0,s.validMove)(t,"right")&&this.moves.push("right");break;case 40:(0,s.validMove)(t,"down")&&this.moves.push("down");break;default:return}}}}]),e}(),h=function(){function e(t,n){var o=this;i(this,e),this.accumulator=new a.default(0,1),this.onKeyDown=function(e){if(o.gameOver)return void o.init();e.repeat||o.snake.queueMove(e.keyCode)},this.config=t,this.ctx=n,this.highScore=parseInt(localStorage.getItem("highScore"))||0,this.highScoreElement=(0,s.nullThrows)(document.getElementById("high-score")),this.scoreElement=(0,s.nullThrows)(document.getElementById("score")),this.init(),this.highScoreElement.innerHTML=""+this.highScore,this.speedup=new a.default(1,10*this.config.speed.denominator)}return o(e,[{key:"init",value:function(){var e=this;this.food=(0,s.createFood)(this.config),this.gameOver=!1,this.setScore(0),this.snake=new d,this.speed=this.config.speed,this.interval=setInterval(function(){e.update(e.speed),e.render()},16)}},{key:"render",value:function(){var e=this.config,t=e.height,n=e.width;this.ctx.fillStyle="white",this.ctx.fillRect(0,0,n,t);var i=!0,o=!1,r=void 0;try{for(var a,u=this.snake.body[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var d=a.value;(0,s.paintCell)(this.config,this.ctx,{x:d.x.val(),y:d.y.val()})}}catch(e){o=!0,r=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw r}}(0,s.paintCell)(this.config,this.ctx,this.food)}},{key:"setScore",value:function(e){this.score=e,this.scoreElement.innerHTML=""+this.score,this.score>this.highScore&&(this.highScore=this.score,this.highScoreElement.innerHTML=""+this.highScore,localStorage.setItem("highScore",""+this.highScore))}},{key:"update",value:function(e){var t=this.config;t.height,t.width;this.accumulator=a.default.add(this.accumulator,e);for(var n=this.snake.body.length-1;n>=0;--n)this.accumulator.val()>=1?"right"===this.snake.body[n].direction?this.snake.body[n].x=a.default.ceil(this.snake.body[n].x):"left"===this.snake.body[n].direction?this.snake.body[n].x=a.default.floor(this.snake.body[n].x):"up"===this.snake.body[n].direction?this.snake.body[n].y=a.default.floor(this.snake.body[n].y):"down"===this.snake.body[n].direction&&(this.snake.body[n].y=a.default.ceil(this.snake.body[n].y)):"right"===this.snake.body[n].direction?this.snake.body[n].x=a.default.add(this.snake.body[n].x,e):"left"===this.snake.body[n].direction?this.snake.body[n].x=a.default.sub(this.snake.body[n].x,e):"up"===this.snake.body[n].direction?this.snake.body[n].y=a.default.sub(this.snake.body[n].y,e):"down"===this.snake.body[n].direction&&(this.snake.body[n].y=a.default.add(this.snake.body[n].y,e)),this.accumulator.val()>=1&&0!==n&&this.snake.body[n-1].didPivot&&(this.snake.body[n].didPivot=!0,this.snake.body[n].direction=this.snake.body[n-1].direction,this.snake.body[n-1].didPivot=!1);if(this.accumulator.val()>=1&&this.snake.moves.length>0&&(this.snake.body[0].direction=this.snake.moves.shift(),this.snake.body[0].didPivot=!0),!(this.accumulator.val()<1)){if(this.accumulator=new a.default(0,1),(0,s.didLose)(this.snake.body,this.config,this.snake.body[0]))return this.gameOver=!0,void clearInterval(this.interval);if(this.snake.body[0].x.val()===this.food.x&&this.snake.body[0].y.val()===this.food.y){var i=this.snake.body[this.snake.body.length-1],o=i.direction,r=i.x,d=i.y;"right"===o?r=a.default.sub(r,u):"left"===o?r=a.default.add(r,u):"up"===o?d=a.default.add(d,u):"down"===o&&(d=a.default.sub(d,u)),this.setScore(this.score+1),this.food=(0,s.createFood)(this.config),this.snake.body.push({didPivot:!1,direction:o,x:r,y:d}),this.speed=a.default.add(this.speed,this.speedup)}}}}]),e}();t.default=h}]);